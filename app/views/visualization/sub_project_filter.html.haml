= render :file => '/visualization/pyramid.html.erb'
- if @json
  = render :file => '/layouts/pyramid_partial.html.erb'
  = flash[:no_test_error]
= javascript_include_tag 'pyramid_visualization'
:javascript
  $("#display_message").css("display", "none");
  var jsonR;
  var regExp = new RegExp(""", 'g');
  jsonR = "#{@json}";
  jsonR = jsonR.replace(regExp, "\"");
  jsonR = JSON.parse(jsonR);
  if (jsonR != "") {
      Pyramid.plotBlockPyramid(jsonR);
      if (false) {
          Pyramid.plotIdealPyramid(jsonR);
      }
  }
