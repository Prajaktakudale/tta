<%= render :file => '/visualization/pyramid.html.erb' %>
<% if @json %>
    <%= render 'layouts/pyramid_partial' %>
    <%= flash[:no_test_error] %>
<% end %>
<%= javascript_include_tag 'util/templates', 'util/utils', 'pyramid_visualization' %>

<script type="text/javascript">
    $("#display_message").css("display", "none");
    var jsonR;
    var regExp = new RegExp("&quot;", 'g');
    jsonR = "<%= @json %>";
    jsonR = jsonR.replace(regExp, "\"");
    jsonR = JSON.parse(jsonR);
    if (jsonR != "") {
        Pyramid.plotBlockPyramid(jsonR);
        if (false) {
            Pyramid.plotIdealPyramid(jsonR);
        }
    }
</script>


